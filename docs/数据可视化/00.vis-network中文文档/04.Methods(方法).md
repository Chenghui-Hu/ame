---
title: Methods(全局方法)
date: 2020-05-27 15:26:39
permalink: /pages/997cc0
categories: 
  - 数据可视化
  - vis-network中文文档
tags: 
  - 
---

#### Methods

这是公共 API 中所有方法的列表。 它们按类别分组，这些类别与上面列出的模块相对应。

## 全局方法。

### destroy()

- **参数**：
  
    - `无`
    
- **返回值**：
  
    - `无`
    
- **用法**：

    从 DOM 中移除network实例。

### setData(nodes,edges)

- **参数：**
    - nodes: vis DataSet/Array
    - edges: vis DataSet/Array
- **返回值：**
    - `无`
- **用法：**
    - 覆盖关系图中的所有数据。 如果在物理引擎模块中启用了'稳定'，关系图将再次'稳定'。 在第一次初始化关系图时也会执行此方法。

### on(event,callback)

- **参数：**
    - event : String
    - callback: Function
- **返回值：**
    - `无`
- **用法：**
    - 设置一个事件侦听器。 根据事件的类型，您可以为回调函数获取不同的参数。 有关更多信息，请查看文档中的事件部分。

### off(event,callback)

- **参数：**
    - event : String
    - callback: Function
- **返回值**：
    - `无`
- **用法**：
    - 删除一个事件侦听器。 您提供的函数必须与在 on 函数中使用的函数完全相同。 如果没有提供任何函数，则将删除所有监听器。 有关更多信息，请查看文档中的事件部分。

### once(event,callback)

- **参数：**
    - event : String
    - callback: Function
- **返回值**：
    - `无`
- **用法**：
    - 只设置一次事件侦听器。 事件发生后，事件侦听器将被删除。 根据事件的类型，您可以为回调函数获取不同的参数。 有关更多信息，请查看文档中的事件部分。

## canvas,dom相关方法

与canvas相关的方法

### canvasToDOM(x,y)

- **参数：**
    - x : Number
    - y: Number
- **返回值**：
    - `{x,y}`
- **用法**：
    - 此函数将画布坐标转换为 DOM 上的坐标。 输入和输出的格式为{ x: Number，y: Number }。 Dom 值相对于关系图容器。

### DOMToCanvas(x,y)

- **参数：**
    - x : Number
    - y: Number
- **返回值**：
    - `{x,y}`
- **用法**：
    - 此函数将 DOM 上的坐标转换为画布坐标。 输入和输出的格式为{ x: Number，y: Number }。 Dom 值相对于关系图容器。

### redraw()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 重新绘制关系图

### setSize(width,height)

- **参数：**
    - width: String
    - height: String
- **返回值**：
    - `无`
- **用法**：
    - 手动设置画布的大小。这个函数将在你调整窗口大小时自动调用。

## 集群（Clustering）

### cluster(options)

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 设置集群选项

### clusterByConnection(nodeId,[options])

- **参数：**
    - nodeId: String
    - options: Object
- **返回值**：
    - `无`
- **用法**：
    - 这个方法查看提供的节点，并将其和所有连接的节点组成一个集群。 可以通过证明 options 对象来定制该行为。 这个对象的所有选项在下面解释。 Joincondition 只显示连接节点。

### clusterByHubsize([hubsize],[options])

- **参数：**
    - nodeId: Number
    - options: Object
- **返回值**：
    - `无`
- **用法**：
    - 此方法检查网络中的所有节点以及边缘数量等于或高于轮毂大小的节点。 如果没有定义轮毂大小，则轮毂大小将被确定为平均值加上两个标准差。对于所有符合条件的节点，将在每个节点上执行 clusterByConnection。 对于 clusterByConnection，描述了 options 对象，这里也是如此。

### clusterOutliers([options])

- **参数：**
    - options: Object
- **返回值**：
    - `无`
- **用法**：
    - 这种方法将所有具有1个边的节点与它们各自的连接节点聚类,对象的详细解释如下。

### findNodes(nodeId)

- **参数：**
    - nodeId: String/Number
- **返回值**：
    - `[包含关系数组]`
- **用法**：
    - 节点可以在集群中的。 集群也可以在集群中的。 此函数返回节点在集群中的包含关系数组。
    - 如果链中的任何节点 id，特别是第一个作为参数传入的节点 id，未出现在当前节点列表中，则返回空数组。
    - 例如: 集群‘ a’包含集群‘ b’ ，集群‘ b’包含集群‘ c’ ，集群‘ c’包含节点‘ fred’。`network.clustering.findNode('fred')` 将会返回 `['A','B','C','fred']`.

### getClusteredEdges(baseEdgeId)

- **参数：**
    - baseEdgeId: String
- **返回值**：
    - `[包含关系数组]`
- **用法**：
    - 类似于 findNode，但它返回集群过程中从提供的边创建的所有边 id

### getBaseEdge(clusteredEdgeId)

- **参数：**
    - clusteredEdgeId: String
- **返回值**：
    - `baseEdgeId`
- **用法**：
    - 当 clusteredgeid 可用时，此方法将返回在 data.edges 中提供的原始 baseEdgeId。 聚类之后，将触发“ SelectEdge”事件，但只提供聚集的边缘。 然后可以使用此方法返回 baseEdgeId。
    - 不推荐使用此方法。请使用 getBaseEdges ()代替。

### getBaseEdges(clusteredEdgeId)

- **参数：**
    - clusteredEdgeId: String
- **返回值**：
    - `[baseEdgeId]`
- **用法**：
    - 对于给定的 clusteredgeid，此方法将返回 data.edges 中提供的所有原始基边缘 id。 对于非聚集(即‘ base’)边缘，返回 cluedgeid。
    - 只返回基边缘 id。 在 clusteredgeid 下的所有聚集边缘 id 都被跳过，但是递归扫描以返回它们的基本 id。

### updateEdge(startEdgeId,options)

- **参数：**
    - startEdgeId: String
    - options: Object
- **返回值**：
    - `无`
- **用法**：
    - 聚集节点之间的可见边缘与创建网络时传递的 data.edges 中提供的边缘不同
    - 通过每一层聚类，在聚类之间创建边的副本，并隐藏之前的边，直到聚类被打开。
    - 这种方法需要一个 edgeId (即。 一个来自 data.edges 的基本 edgeId) ，并将选项和聚类时从中创建的任何边应用到它。
    - 例如: network.clustering.updateEdge (originalEdge.id，{ color: ’ # aa0000’}) ; 这将使基本边缘和任何后续边缘变成红色，所以当打开簇时，边缘都是相同的颜色。

### updateClusteredNode(clusteredNodeId,options)

- **参数：**
    - clusteredNodeId: String
    - options: Object
- **返回值**：
    - `无`
- **用法**：
    - 创建时的集群节点不包含在创建网络时传递的原始 data.Nodes 中此方法更新集群节点。
    - Example: `network.clustering.updateClusteredNode(clusteredNodeId, {shape : 'star'});`

### isCluster(nodeId)

- **参数：**
    - nodeId: String
- **返回值**：
    - `Boolean`
- **用法**：
    - 如果已提供 ID 的节点是集群，则返回 true。

### getNodesInCluster(clusterNodeId)

- **参数：**
    - clusterNodeId: String
- **返回值**：
    - `[nodeid]`
- **用法**：
    - 返回一个数组，其中包含如果打开群集将释放的所有节点的 nodeid。

### openCluster(nodeId,options)

- **参数：**
    - nodeId: String
    - options: Object
- **返回值**：
    - `Boolean`
- **用法**：
    - 打开群集，释放所包含的节点和边，删除群集节点和群集边。 Options 对象是可选的，目前支持一个选项 releaseFunction，该函数可用于在集群打开后手动定位节点。
    - function releaseFunction (clusterPosition, containedNodesPositions) {
            var newPositions = {};
            // clusterPosition = {x:clusterX, y:clusterY};
            // containedNodesPositions = {nodeId:{x:nodeX,y:nodeY}, nodeId2....}
            newPositions[nodeId] = {x:newPosX, y:newPosY};
            return newPositions;
        }
    - Containednodespositions 包含聚集时集群中节点的位置。 这个函数将返回 newPositions，它可以是 containedNodesPositions (修改过的) ，也可以是一个新对象。 这必须是一个具有键值等于 containedNodesPositions 中存在的 nodeid 和{ x: x，y: y } position 对象的对象。
    - 对于这个返回的对象中没有列出的所有 nodeid，我们将把它们放在集群的位置。 这也是没有定义 releaseFunction 时的默认行为。

## 布局相关方法（Layout）

### getSeed()

- **参数：**
    - `无`
- **返回值**：
    - `Number/String`
- **用法**：
    - 如果您喜欢网络的布局，并希望下次以同样的方式开始，请使用此方法要求种子并将其放入 layout.randomSeed 选项中。

## 可视化编辑相关方法

### enableEditMode()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 以编程方式启用编辑模式。效果类似于按下编辑按钮。

### disableEditMode()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 以编程方式禁用编辑模式。效果类似于按下关闭图标(在工具栏角上的小十字)。

### addNodeMode()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 进入 addNode 模式。 不需要启用编辑模式或操作。 若要脱离此模式，请调用 disableEditMode ()。 Handlerfunctions 中定义的回调函数仍然应用。 要在没有操作 GUI 的情况下使用这些方法，请确保将 enabled 设置为 false。

### editNode()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 编辑选定的节点。来自 addNodeMode 的解释也适用于这里。

### addEdgeMode()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 进入 addEdge 模式，addNodeMode 的解释在这里也适用。

### editEdgeMode()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 进入 editEdge 模式，addNodeMode 的解释在这里也适用。

### deleteSelected()

- **参数：**
    - `无`
- **返回值**：
    - `无`
- **用法**：
    - 删除选中。不需要启用编辑模式或操作。

## 获取节点或边信息的方法

### getPositions(nodeIds | nodeId)

- **参数：**

    - nodeIds | nodeId : Array

- **返回值**：

    - `节点位置信息`

- **用法**：

    - 返回节点或节点的画布空间中的 x y 位置，并将提供的 nodeId 或 nodeId 作为对象:

    - ```
        // All nodes in the network.
        network.getPositions();
        >   {
                a123: { x: 5, y: 12 },
                b456: { x: 3, y: 4 },
                c789: { x: 7, y: 10 }
            }
        
        
        // Specific nodes.
        network.getPositions(['a123', 'b456']);
        >   {
                a123: { x: 5, y: 12 },
                b456: { x: 3, y: 4 },
            }
        
        
        // A single node.
        network.getPositions('a123');
        >   {
                a123: { x: 5, y: 12 }
            }
                
        ```

### getPosition(nodeId)

- **参数：**

    - nodeId : String | Number

- **返回值**：

    - `节点位置信息`

- **用法**：

    - 返回特定节点的画布空间中的 xy 位置。

    - ```
        network.getPosition('a123');
        >   { x: 5, y: 12 }
                            
        ```

    - 如果没有提供 id，该方法将抛出 TypeError 如果提供的 id 与网络中的节点不对应，则该方法将抛出 ReferenceError。

### storePositions()

- **参数：**
    - nodeId : String | Number
- **返回值**：
    - `无`
- **用法**：
    - 当使用可见光时。 Dataset 将节点加载到网络中时，此方法将把所有节点的 x 和 y 位置放到该数据集中。 如果你正在从数据库中加载节点，并将其与 DataSet 动态耦合，你可以使用它来稳定网络一次，然后通过 DataSet 保存数据库中的位置，这样下一次加载节点时，稳定性将几乎是瞬时的。
    - 如果节点仍在移动，并且您使用的是动态平滑边缘(默认情况下是打开的) ，则可以在物理模块中使用选项 stabilizationonlydynamicedges 来改善初始化时间。
    - 此方法不支持群集。 目前，在使用集群时不可能缓存位置，因为不能仅仅从位置正确地初始化它们。

### moveNode(nodeId,x,y)

- **参数：**
    - nodeId : String | Number
    - x:Number
    - y:Number
- **返回值**：
    - `无`
- **用法**：
    - 可以使用此命令以编程方式移动节点。 提供的 x 和 y 位置必须在画布空间！

### getBoundingBox(nodeId)

- **参数：**

    - nodeId : String

- **返回值**：

    - `节点位置`

- **用法**：

    - 返回节点（包含标签）在绘图空间中的位置

    - ```
        {
          top: Number,
          left: Number,
          right: Number,
          bottom: Number
        }
        ```

### getConnectedNodes(nodeId | edgeId,[direction])

- **参数：**
    - nodeId : String | Number
    - x:Number
    - y:Number
- **返回值**：
    - `[节点数组]`
- **用法**：
    - 返回直接连接到此节点或边缘的所有节点的 nodeid 数组。
    - 对于节点 id，返回一个具有已连接节点 id 的数组。 如果可选的参数方向设置为字符串‘ from’ ，则只返回父节点。 如果方向设置为“ to” ，则只返回子节点。 任何其他值或未定义的值都返回父节点和子节点。
    - 对于边 id，返回一个数组: [ fromId，toId ]。边的参数方向被忽略。

### getConnectedEdges(edgeId)

- **参数：**
    - edgeId: String
- **返回值**：
    - `[边数组]`
- **用法**：
    - 返回连接到此节点的边的 edgeid 数组。

## 物理引擎相关方法

### startSimulation()

- **参数：**
    - 无
- **返回值**：
    - `无`
- **用法**：
    - 开始物理模拟。 这通常是在需要的时候完成的，只有当你自己停止模拟并希望继续模拟的时候才真正有用。

### stopSimulation(edgeId)

- **参数：**
    - 无
- **返回值**：
    - `无`
- **用法**：
    - 这将停止物理模拟并触发一个稳定的事件。 可以通过拖动节点、更改数据集或调用 startSimulation ()重新启动它。

### stabilize([iterations])

- **参数：**
    - 无
- **返回值**：
    - `无`
- **用法**：
    - 您可以在任何时候手动调用 stabilize。 上面所有的稳定选项都被使用。 您可以选择提供它应该进行的迭代次数。

## 节点或边的选中方法

### getSelection()

- **参数：**

    - 无

- **返回值**：

    - `选中的节点及边组成的对象`

- **用法**：

    - 返回一个具有选定节点和边的对象，如下所示:

    - ```
        {
          nodes: [Array of selected nodeIds],
          edges: [Array of selected edgeIds]
        }
        ```

### getSelectedNodes()

- **参数：**
    - 无
- **返回值**：
    - `选中的节点组成的数组`
- **用法**：
    - 返回选定节点 id 的数组，如下所示: [ nodeId1，nodeId2，. . ]。

### getSelectedEdges()

- **参数：**
    - 无
- **返回值**：
    - `选中的边组成的数组`
- **用法**：
    - 返回选定边id 的数组，如下所示: [ edgeId1，edgeId2，. . ]。

### getNodeAt({x,y})

- **参数：**
    - x:  xPosition Dom
    - y:  yPosition Dom
- **返回值**：
    - `返回在此区域内的节点ID`
- **用法**：
    - 返回一个节点 id 或未定义的节点。 Dom 位置应该以画布左上角的像素为单位。

### getEdgeAt({x,y})

- **参数：**
    - x:  xPosition Dom
    - y:  yPosition Dom
- **返回值**：
    - `返回在此区域内的边ID`
- **用法**：
    - 返回一个 edgeId 或未定义的。 Dom 位置应该以画布左上角的像素为单位。

### selectNodes(nodeIds,[highlightEdges])

- **参数：**
    - nodeIds:  Array
    - highlightEdges:  Boolean,是否需要高亮
- **返回值**：
    - `无`
- **用法**：
    - 选择与输入数组中的 id 对应的节点。 如果 highlightEdges 为真或未定义，则也将选择相邻的边。 此方法在选择自己的对象之前取消选择所有其他对象。 不会触发事件。

### selectEdges(edgeIds)

- **参数：**
    - edgeIds:  Array
- **返回值**：
    - `无`
- **用法**：
    - 选择与输入数组中的 id 对应的边缘。 此方法在选择自己的对象之前取消选择所有其他对象。 不会触发事件。

### setSelection(selection,[options])

- **参数：**

    - selection:  Object,
    - options: Object

- **返回值**：

    - `无`

- **用法**：

    - 设置选择，必须是这样的对象:。

    - ```
        {
          nodes: [Array of nodeIds],
          edges: [Array of edgeIds]
        }
        ```

    - 您还可以在选择对象中只传递节点或边。可用的选项有:

    - ```
        {
          unselectAll: Boolean,
          highlightEdges: Boolean
        }
        ```

### unselectAll()

- **参数：**
    - 无
- **返回值**：
    - `无`
- **用法**：
    - 取消选择所有对象。不触发事件。

## 方法来控制用于缩放和动画的视区。

### getScale()

- **参数：**
    - 无
- **返回值**：
    - `缩放级别数字`
- **用法**：
    - 返回当前的网络规模缩放级别。1.0是100% ，0是无限放大。

### getViewPosition()

- **参数：**
    - 无
- **返回值**：
    - `视图中心`
- **用法**：
    - 返回形式为{ x: { Number } ，y: { Number }}的视图的当前中心焦点

### fit([options])

- **参数：**

    - options:Object

- **返回值**：

    - `视图中心`

- **用法**：

    - 缩放所有节点以适应画布。你可以提供自定义选项:

    - ```
        {
          nodes:[Array of nodeIds],
          animation: { // -------------------> can be a boolean too!
            duration: Number
            easingFunction: String
          }
        }
        ```

    - 可以使用节点缩放视图中的特定节点。

    - 其他选项在下面的 moveTo ()描述中进行了说明。所有选项对于适合的方法都是可选的。

### focus(nodeId,[options])

- **参数：**

    - nodeId: String,
    - options: Object

- **返回值**：

    - `无`

- **用法**：

    - 您可以使用此函数将焦点放在节点上。 这意味着视图将锁定该节点，如果它移动，视图也将相应移动。 如果用户拖动视图，则焦点将中断。 你可以提供自定义效果的选项:

    - ```
        {
          scale: Number,
          offset: {x:Number, y:Number}
          locked: boolean
          animation: { // -------------------> can be a boolean too!
            duration: Number
            easingFunction: String
          }
        }
        ```

    - 除了锁定之外的所有选项都在下面的 moveTo ()描述中进行了说明。 “锁定”表示放大动画完成后视图是否仍锁定在节点上。 默认值为 true。 在 focus 方法中，options 对象是可选的。

### moveTo(options)

- **参数：**

    - options: Object

- **返回值**：

    - `视图中心`

- **用法**：

    - 您可以使用 moveTo 方法动画或移动相机。选项如下:

    - ```
        {
          position: {x:Number, y:Number},
          scale: Number,
          offset: {x:Number, y:Number}
          animation: { // -------------------> can be a boolean too!
            duration: Number
            easingFunction: String
          }
        }
        ```

    - 位置(在帆布单位!) 是相机中心焦点的位置。 量表是目标动态水平。 默认值是1.0。 偏移量(以 DOM 单位为单位)是视图中心聚焦的像素数。 默认值为{ x: 0，y: 0}。 对于动画，您可以使用布尔值来使用默认选项，也可以禁用它，或者您可以手动定义时间长度(以毫秒为单位)和宽松函数。 可用的有: linear，easeInQuad，easeOutQuad，easeInOutQuad，easeOutCubic，easeeinoutcubic，easeInQuart，easeOutQuart，easeeinquart，easeInQuint，easeOutQuint，easeeinoutquint。 你必须定义至少一个比例尺，位置或偏移量。 否则，就没有什么可以移动的了。

### releaseNode()

- **参数：**
    - 无
- **返回值**：
    - `无`
- **用法**：
    - 以编程方式发布聚焦节点。



## 配置模块相关方法

### getOptionsFromConfigurator()

- **参数：**
    - 无
- **返回值**：
    - `配置对象`
- **用法**：
    - 如果使用配置器，则可以调用此方法来获取一个选项对象，该对象包含用户与配置器交互时产生的默认选项的所有差异。